# IMG-Quest クイックスタートガイド

このガイドでは、IMG-Questを最短5分で起動し、基本的な使い方を体験できます。

## 📋 前提条件

- Docker Desktop がインストールされている
- 最低8GB以上のメモリ
- ポート 3000, 8001, 5433 が使用可能

## 🚀 ステップ1: 起動

```bash
# プロジェクトディレクトリに移動
cd img-quest

# すべてのサービスを起動
docker compose up -d

# ログを確認（オプション）
docker compose logs -f
```

初回起動時は以下の処理が行われます：
1. Docker イメージのビルド（3-5分）
2. PostgreSQL データベースの初期化
3. カタログ（fi_core.yml）の読み込み
4. Web/APIサーバーの起動

起動完了の確認：
```bash
# APIヘルスチェック
curl http://localhost:8001/health
# → {"status":"ok"} が返ればOK
```

## 🌐 ステップ2: アクセス

ブラウザで以下のURLを開きます：

- **Web UI**: http://localhost:3000
- **API ドキュメント**: http://localhost:8001/docs

## 📝 ステップ3: 最初のプロジェクトを作成

### 3.1 プロジェクト作成画面

1. Web UI のトップページで「+ 新規プロジェクト」をクリック
2. 以下の情報を入力：

```
プロジェクト名: サンプルFI導入プロジェクト
国/地域: 日本
通貨: JPY（日本円）
業種: 製造業
会社数: 1
説明: IMG-Questの動作確認用プロジェクト
```

3. 「作成してウィザードを開始」をクリック

→ 自動的にウィザード画面に遷移します

## 🧙 ステップ4: ウィザードで質問に回答

### 4.1 最初の質問: 会計年度バリアント

```
質問: 会計年度/期間の定義。締め運用・移行・採番に影響。
選択肢:
  - K4 (4月開始)
  - V3 (1月開始)
  - CUSTOM (カスタム)

→ K4 を選択して「次へ」
```

### 4.2 2番目の質問: 会社コード基本情報

```
会社コード: 1000
ローカル通貨: JPY
国: JP

→ 入力して「次へ」
```

### 4.3 その他の質問

ウィザードが依存関係を自動判定し、次に回答すべき質問を提示します。
全部で 8-10 問程度の質問に答えます。

**進捗バー** で現在の進捗状況を確認できます。

## 📊 ステップ5: バックログを確認

ウィザードを途中で終了したい場合は「後で続ける」をクリック。

1. プロジェクトダッシュボードに戻る
2. 「バックログ」カードをクリック

### バックログ画面では：

- **ステータス別フィルタ**: 
  - 🟢 READY: 対応可能な質問
  - 🔴 BLOCKED: 依存関係により保留中
  - ✅ DONE: 回答済み

- **依存関係の確認**: 
  - 各項目の「依存関係」列で前提条件を確認

- **優先度別表示**:
  - P0（最優先）の項目から表示

## 📄 ステップ6: 成果物を生成

### 6.1 成果物画面を開く

1. プロジェクトダッシュボードに戻る
2. 「成果物」カードをクリック

### 6.2 成果物を生成

1. 「成果物を生成」ボタンをクリック
2. 4種類の成果物が自動生成されます：
   - Decision Log
   - Config Workbook
   - Test View
   - Migration View

### 6.3 成果物を確認・ダウンロード

各タブをクリックして内容を確認：

**Decision Log**:
- すべての決定事項を時系列で記録
- 誰がいつ何を決定したか

**Config Workbook**:
- 必要な設定項目の一覧
- 未決定項目は「TBD」として表示
- 完了状況を確認

**Test View**:
- 各設定のテスト観点
- テストケース作成の参考に

**Migration View**:
- 移行が必要なマスタデータ
- 移行手順のガイド

「📥 ダウンロード」ボタンで Markdown ファイルとしてダウンロード可能。

## 🎯 完了！

これで IMG-Quest の基本的な使い方を体験できました。

## 🔄 次のステップ

### より詳しく学ぶ

- [README.md](README.md) - 全体的な説明
- [docs/SPEC.md](docs/SPEC.md) - 詳細な仕様
- [docs/CATALOGUE/fi_core.yml](docs/CATALOGUE/fi_core.yml) - カタログの中身

### カタログをカスタマイズ

1. `docs/CATALOGUE/fi_core.yml` を編集
2. 新しい設定項目を追加
3. APIを再起動: `docker compose restart api`

### 複数プロジェクトの管理

トップページから複数のプロジェクトを作成・管理できます。

## ❓ トラブルシューティング

### ポートが既に使用されている

```bash
# ポートを変更する場合は docker-compose.yml を編集
# 例: 3000 → 3001
ports:
  - "3001:3000"
```

### データベース接続エラー

```bash
# データベースが起動するまで待つ
docker compose logs db

# 再起動
docker compose restart api
```

### カタログが読み込まれない

```bash
# APIログを確認
docker compose logs api | grep -i catalog

# カタログファイルの存在確認
ls -la docs/CATALOGUE/fi_core.yml
```

### すべてリセットしたい

```bash
# すべてのコンテナとボリュームを削除
docker compose down -v

# 再起動
docker compose up -d
```

## 💡 ヒント

- **こまめに保存**: ウィザードは自動保存されます
- **戻って変更**: 回答を変更したい場合はウィザードをやり直せます
- **成果物は何度でも**: 成果物は何度でも再生成できます
- **バックログで全体像**: バックログで未決項目と依存関係を確認

## 🎓 学習リソース

- FastAPI ドキュメント: http://localhost:8001/docs
- API ヘルスチェック: http://localhost:8001/health
- カタログファイル: `docs/CATALOGUE/fi_core.yml`

お疲れさまでした！IMG-Quest をお楽しみください 🎉
